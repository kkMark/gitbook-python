## 第三课 Linux用户与权限

#### 超级用户（root）

* root账号一般用于系统的维护和管理
* 如普通用户需要用到root权限时，可在命令前加 sud，如下

```python
sudo ls
```



#### 权限说明

| 权限 | 缩写 | 数字代号 |
| :--- | :--- | :--- |
| 读（read） | r | 4 |
| 写（write） | w | 2 |
| 执行（excute） | x | 1 |



#### 权限设置

* `chmod` 用于修改 用户/组 对 文件 / 目录的权限，使用如下

```python
chmod +/-rwx 文件名｜目录
```



#### 群组权限管理

* 对组设置权限之后，里面的人都有相同的权限

| 命令 | 说明 |
| :--- | :--- |
| groupadd 组名 | 添加组 |
| groupdel 组名 | 删除组 |
| cat /etc/group | 查看组的信息 |
| chgrp -R 组名 文件/目录名 | 修改所属组的权限 |



#### 用户权限管理（这次的扩展大多数为必填项）

* 在创建用户后默认为 `dash` ，而我们原本使用的用户为 `bash`
* `dash`的效果会更好，但是`dash`在其他的地方访问并不怎么方便

| 命令 | 说明 |
| :--- | :--- |
| useradd -m -g 组名 组新建用户名 | 添加新用户 |
| passwd 用户名 | 设置用户密码，如果是普通用户，直接passwd可以修改自己的密码 |
| userdel -r 用户名 | 删除用户 |
| usermod \[-g\] \[-s\] \[-G\] 用户组 用户名 | 更改用户所在用户组 |
| chown 用户 路径 | 更改文件拥有者 |
| cat /etc/passwd | 查看用户信息，创建后将会保存到 /etc/passwd下面 |

| useradd的扩展 |  |
| :--- | :--- |
| -m | 自动建立用户家目录\* |
| -g | 指定用户所在的组 |

| usermod的扩展 |  |
| :--- | :--- |
| -g | 更改一个用户的分组 |
| -G | 将一个用户同时添加到其他组上面去 |
| -s | 后面拼接 /bin/bash 用户 |

```python
# #后面的都是注释说明，可以不用理
# 这里有一点需要注意，新增了用户后，需要调用下面的命令设置密码，否则无法访问
# 添加新用户例子：
useradd -m -g dev ios # 这里-m表示创建 /home/ios，-g 表示要给哪个群组添加用户
# 设置用户密码
password ios

# 输入了设置用户密码的命令后，会提示你输入新密码，再提示你确认密码
# 题1：创建一个组，然后给读写权限，之后添加两个用户，在通过ssh访问这两个用户
```

```python
# 删除用户
useradd -r ios # 这里的 -r 表示删除 /home/ios
```

```python
# 更改用户组
usermod -g dev ios
# 更改用户类型
usermod -s /bin/bash 用户名
```



#### 查看用户信息

| 命令 | 说明 |
| :--- | :--- |
| id \[用户名\] | 查看用户的信息，所有的信息是以 : 隔开的 |
| who | 查看当前所有登录的用户列表 |
| whoami | 查看当前登录用户的账户名 |



#### 切换用户

| 命令 | 说明 |
| :--- | :--- |
| su - 用户名 | 切换用户，- 是用来切换路径的 |
| exit | 退出切换的用户 |



#### 其他小知识

##### 1、which

* `/etc/passwd` 是用于保存用户信息的文件
* ```/usr/bin/passwd`` 是用于修改用户密码的程序
* `while` 命令可以查看执行命令所在位置

##### 2、bin 和 sbin

* 在 `Linux`中，绝大多数可执行文件都是保存在 `/bin`、`/sbin`、`/usr/bin`、`/usr/sbin`
* `/bin` \(`binary`\) 是二进制执行文件目录，主要用于具体应用
* `/sbin` \(`system binary`\) 是系统管理员专用的二进制代码存放目录，主要用于系统管理
* `/usr/bin` \(`user commands for application`\) 后期安装的应用路径
* `/usr/sbin` \(`super user commands for application`\) 超级用户的一些管理软件

